CREATE TABLE IF NOT EXISTS Artists (
	Id SERIAL PRIMARY KEY,
	Name VARCHAR(30) NOT NULL
);

CREATE TABLE IF NOT EXISTS Genres (
	Id SERIAL PRIMARY KEY,
	Name VARCHAR(20) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS ArtistGenre (
	Id SERIAL PRIMARY KEY,
	ArtistId INTEGER NOT NULL REFERENCES Artists(Id),
	GenreId INTEGER NOT NULL REFERENCES Genres(Id)
);

CREATE TABLE IF NOT EXISTS Albums (
	Id SERIAL PRIMARY KEY,
	Name VARCHAR(20) NOT NULL,
	Year INTEGER CHECK(Year > 0)
);

CREATE TABLE IF NOT EXISTS ArtistAlbum (
	Id SERIAL PRIMARY KEY,
	ArtistId INTEGER NOT NULL REFERENCES Artists(Id),
	AlbumId INTEGER NOT NULL REFERENCES Albums(Id)
);

CREATE TABLE IF NOT EXISTS Tracks (
	Id SERIAL PRIMARY KEY,
	Name VARCHAR(40) NOT NULL,
	Lenght NUMERIC NOT NULL CHECK(Lenght > 0),
	AlbumId INTEGER NOT NULL REFERENCES Albums(Id)
);

CREATE TABLE IF NOT EXISTS Collections (
	Id SERIAL PRIMARY KEY,
	Name VARCHAR(40) NOT NULL,
	Year INTEGER CHECK(Year > 0)
);

CREATE TABLE IF NOT EXISTS TrackCollection (
	Id SERIAL PRIMARY KEY,
	TrackId INTEGER NOT NULL REFERENCES Tracks(Id),
	CollectionId INTEGER NOT NULL REFERENCES Collections(Id)
);